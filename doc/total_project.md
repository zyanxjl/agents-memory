# 智能体记忆系统 - 可视化管理平台项目规划

## 1. 总体系统功能描述

### 1.1 项目背景

本项目基于HelloAgents框架的记忆与检索系统，旨在将现有的智能体记忆模块升级为一个具备Web后端展示功能的完整平台。原系统已实现了四种认知记忆类型和RAG检索增强生成能力，但缺乏可视化界面和统一的管理入口。

### 1.2 核心功能模块

#### 1.2.1 记忆管理模块

| 功能 | 描述 |
|------|------|
| **工作记忆管理** | 管理临时对话上下文，支持容量限制、TTL自动清理、优先级排序 |
| **情景记忆管理** | 存储具体交互事件，支持时间序列组织、会话级检索、模式识别 |
| **语义记忆管理** | 管理抽象知识概念，支持知识图谱构建、实体关系推理、混合检索 |
| **感知记忆管理** | 处理多模态数据（文本、图像、音频），支持跨模态检索 |

#### 1.2.2 RAG知识库模块

| 功能 | 描述 |
|------|------|
| **文档处理** | 支持PDF、Office、图片、音频等多格式文档解析（基于MarkItDown） |
| **智能分块** | 基于Markdown结构的智能分块策略，Token计算优化 |
| **向量检索** | 统一嵌入接口，支持百炼API、本地Transformer、TF-IDF兜底 |
| **高级检索** | 多查询扩展(MQE)、假设文档嵌入(HyDE)、重排序优化 |

#### 1.2.3 可视化展示模块

| 功能 | 描述 |
|------|------|
| **仪表盘** | 系统概览、记忆统计、存储状态监控 |
| **记忆浏览器** | 分类浏览、搜索过滤、详情查看、批量操作 |
| **知识图谱可视化** | 实体关系图展示、节点交互、路径查询 |
| **RAG知识库管理** | 文档上传、分块预览、检索测试 |
| **问答测试台** | 实时问答、检索结果展示、上下文追踪 |

#### 1.2.4 系统管理模块

| 功能 | 描述 |
|------|------|
| **用户管理** | 多用户支持、数据隔离、权限控制 |
| **配置管理** | 数据库连接、嵌入模型、检索参数配置 |
| **日志监控** | 操作日志、性能监控、错误追踪 |
| **数据维护** | 记忆整合、遗忘策略、备份恢复 |

---

## 2. 总体系统架构描述

### 2.1 系统架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              前端展示层 (Frontend)                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │
│  │   仪表盘    │  │  记忆浏览器  │  │ 知识图谱     │  │   RAG知识库管理     │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘ │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │
│  │  问答测试台  │  │  系统配置   │  │  日志监控   │  │    用户管理         │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              API网关层 (FastAPI)                              │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │  RESTful API  │  WebSocket  │  文件上传  │  认证鉴权  │  请求限流      │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              业务逻辑层 (Services)                            │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │  MemoryService  │  │   RAGService    │  │      AnalyticsService       │  │
│  │  - 记忆CRUD     │  │  - 文档处理     │  │  - 统计分析                 │  │
│  │  - 检索查询     │  │  - 知识检索     │  │  - 报告生成                 │  │
│  │  - 整合遗忘     │  │  - 问答生成     │  │  - 趋势预测                 │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │  GraphService   │  │   UserService   │  │      ConfigService          │  │
│  │  - 图谱构建     │  │  - 用户管理     │  │  - 配置管理                 │  │
│  │  - 关系推理     │  │  - 权限控制     │  │  - 参数验证                 │  │
│  │  - 可视化数据   │  │  - 会话管理     │  │  - 动态加载                 │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              记忆核心层 (Memory Core)                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                        MemoryManager (统一调度)                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────────────────┐    │
│  │WorkingMem │  │EpisodicMem│  │SemanticMem│  │   PerceptualMemory    │    │
│  │(工作记忆) │  │(情景记忆) │  │(语义记忆) │  │    (感知记忆)         │    │
│  │ 纯内存    │  │SQLite+QD  │  │QD+Neo4j   │  │  多模态+CLIP/CLAP     │    │
│  └───────────┘  └───────────┘  └───────────┘  └───────────────────────┘    │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                     RAG Pipeline (检索增强生成)                      │    │
│  │   文档加载 → MarkItDown → 智能分块 → 向量化 → 检索 → 重排序 → 生成  │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              嵌入服务层 (Embedding)                           │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │ DashScope API   │  │ LocalTransformer│  │     TF-IDF Fallback         │  │
│  │ (text-embed-v3) │  │ (all-MiniLM-L6) │  │     (轻量级兜底)            │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              存储后端层 (Storage)                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │   Qdrant Cloud  │  │   Neo4j Aura    │  │       SQLite Local          │  │
│  │   (向量检索)    │  │   (知识图谱)    │  │     (结构化存储)            │  │
│  │   - 语义相似度  │  │   - 实体节点    │  │     - 记忆文档              │  │
│  │   - 过滤检索    │  │   - 关系边      │  │     - 元数据索引            │  │
│  │   - HNSW索引    │  │   - Cypher查询  │  │     - 用户数据              │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 目录结构设计

```
agents_memory/
├── api/                          # API层
│   ├── __init__.py
│   ├── main.py                   # FastAPI应用入口
│   ├── routes/                   # 路由模块
│   │   ├── __init__.py
│   │   ├── memory.py             # 记忆API
│   │   ├── rag.py                # RAG API
│   │   ├── graph.py              # 知识图谱API
│   │   ├── analytics.py          # 分析统计API
│   │   ├── user.py               # 用户管理API
│   │   └── config.py             # 配置管理API
│   ├── schemas/                  # Pydantic模型
│   │   ├── __init__.py
│   │   ├── memory.py
│   │   ├── rag.py
│   │   ├── graph.py
│   │   └── common.py
│   ├── middleware/               # 中间件
│   │   ├── __init__.py
│   │   ├── auth.py               # 认证中间件
│   │   ├── logging.py            # 日志中间件
│   │   └── cors.py               # CORS配置
│   └── dependencies.py           # 依赖注入
│
├── core/                         # 核心业务层
│   ├── __init__.py
│   ├── memory/                   # 记忆系统（重构自原types/）
│   │   ├── __init__.py
│   │   ├── base.py               # 基础类（保留原有）
│   │   ├── manager.py            # 管理器（保留原有）
│   │   ├── working.py            # 工作记忆（保留原有）
│   │   ├── episodic.py           # 情景记忆（保留原有）
│   │   ├── semantic.py           # 语义记忆（保留原有）
│   │   └── perceptual.py         # 感知记忆（保留原有）
│   ├── rag/                      # RAG系统（重构自原rag/）
│   │   ├── __init__.py
│   │   ├── pipeline.py           # RAG管道（保留原有）
│   │   ├── document.py           # 文档处理（保留原有）
│   │   └── retriever.py          # 检索器（新增抽象）
│   ├── embedding/                # 嵌入服务（重构自原embedding.py）
│   │   ├── __init__.py
│   │   ├── base.py               # 嵌入基类
│   │   ├── dashscope.py          # 百炼嵌入
│   │   ├── local.py              # 本地嵌入
│   │   └── provider.py           # 嵌入提供器（单例）
│   └── storage/                  # 存储后端（重构自原storage/）
│       ├── __init__.py
│       ├── qdrant.py             # Qdrant存储（保留原有）
│       ├── neo4j.py              # Neo4j存储（保留原有）
│       └── sqlite.py             # SQLite存储（保留原有）
│
├── services/                     # 业务服务层
│   ├── __init__.py
│   ├── memory_service.py         # 记忆服务
│   ├── rag_service.py            # RAG服务
│   ├── graph_service.py          # 图谱服务
│   ├── analytics_service.py      # 分析服务
│   ├── user_service.py           # 用户服务
│   └── config_service.py         # 配置服务
│
├── web/                          # 前端静态资源
│   ├── static/                   # 静态文件
│   │   ├── css/
│   │   ├── js/
│   │   └── images/
│   ├── templates/                # Jinja2模板
│   │   ├── base.html
│   │   ├── dashboard.html
│   │   ├── memory_browser.html
│   │   ├── knowledge_graph.html
│   │   ├── rag_manager.html
│   │   ├── qa_console.html
│   │   └── settings.html
│   └── components/               # 可复用组件
│       ├── sidebar.html
│       ├── header.html
│       └── charts.html
│
├── config/                       # 配置文件
│   ├── __init__.py
│   ├── settings.py               # 应用配置
│   ├── database.py               # 数据库配置
│   └── logging.py                # 日志配置
│
├── utils/                        # 工具函数
│   ├── __init__.py
│   ├── helpers.py                # 辅助函数
│   ├── validators.py             # 数据验证
│   └── converters.py             # 数据转换
│
├── tests/                        # 测试
│   ├── __init__.py
│   ├── test_api/
│   ├── test_services/
│   └── test_core/
│
├── docs/                         # 文档（保留原有）
│   ├── prompts.txt
│   ├── 第八章 记忆与检索.md
│   └── total_project.md          # 本规划文档
│
├── scripts/                      # 脚本
│   ├── init_db.py                # 数据库初始化
│   ├── migrate.py                # 数据迁移
│   └── seed_data.py              # 测试数据
│
├── .env.example                  # 环境变量示例
├── requirements.txt              # Python依赖
├── pyproject.toml                # 项目配置
├── Dockerfile                    # Docker配置
├── docker-compose.yml            # Docker Compose
└── README.md                     # 项目说明
```

### 2.3 数据流设计

```
用户请求流程：
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│   用户   │ -> │  前端页面 │ -> │ FastAPI  │ -> │ Services │ -> │ Core层   │
│          │ <- │          │ <- │  API     │ <- │          │ <- │          │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
                                                                      │
                                                                      ▼
                                                               ┌──────────┐
                                                               │ Storage  │
                                                               │(QD/Neo4j)│
                                                               └──────────┘

记忆添加流程：
用户输入 -> API接收 -> MemoryService.add_memory() 
         -> MemoryManager.add_memory() 
         -> 自动分类(working/episodic/semantic)
         -> 对应Memory类型.add()
         -> 嵌入生成 -> 向量存储(Qdrant)
         -> 实体提取 -> 图谱存储(Neo4j)
         -> 元数据存储(SQLite)
         -> 返回记忆ID

检索流程：
用户查询 -> API接收 -> MemoryService.search()
         -> 嵌入生成
         -> 多类型并行检索 [Working/Episodic/Semantic]
         -> 向量检索(Qdrant) + 图谱检索(Neo4j)
         -> 混合排序(相似度+重要性+时间衰减)
         -> 返回TopK结果

RAG问答流程：
用户问题 -> API接收 -> RAGService.ask()
         -> 查询扩展(MQE/HyDE)
         -> 向量检索 -> 候选池
         -> 图信号计算 -> 重排序
         -> 上下文合并
         -> LLM生成答案
         -> 返回答案+引用来源
```

---

## 3. 主要技术方案描述

### 3.1 后端技术栈

| 技术组件 | 选型 | 说明 |
|---------|------|------|
| **Web框架** | FastAPI | 异步高性能、自动OpenAPI文档、类型安全 |
| **数据验证** | Pydantic v2 | 数据模型验证、序列化 |
| **数据库ORM** | SQLAlchemy 2.0 | 可选，用于复杂查询场景 |
| **任务队列** | Celery + Redis | 异步任务（文档处理、批量操作） |
| **缓存** | Redis | API缓存、会话管理 |
| **日志** | Loguru | 结构化日志、异步输出 |

### 3.2 前端技术栈

| 技术组件 | 选型 | 说明 |
|---------|------|------|
| **模板引擎** | Jinja2 | 服务端渲染，与FastAPI集成 |
| **CSS框架** | Tailwind CSS | 实用优先、响应式设计 |
| **JS框架** | Alpine.js | 轻量级响应式，适合SSR |
| **图表库** | ECharts | 丰富的图表类型、知识图谱可视化 |
| **HTTP客户端** | Axios | API调用 |

### 3.3 存储技术栈（保持原有）

| 存储类型 | 技术选型 | 用途 |
|---------|---------|------|
| **向量数据库** | Qdrant Cloud | 高性能语义检索、HNSW索引 |
| **图数据库** | Neo4j Aura | 知识图谱、关系推理 |
| **关系数据库** | SQLite | 本地存储、元数据管理 |
| **文件存储** | 本地文件系统 | 上传文档临时存储 |

### 3.4 嵌入技术栈（保持原有）

| 嵌入模型 | 说明 |
|---------|------|
| **DashScope** | 阿里云百炼平台 text-embedding-v3，维度1024 |
| **本地Transformer** | sentence-transformers/all-MiniLM-L6-v2，维度384 |
| **TF-IDF** | 轻量级兜底方案 |

### 3.5 核心API设计

#### 3.5.1 记忆管理API

```
# 记忆CRUD
POST   /api/v1/memory                    # 添加记忆
GET    /api/v1/memory/{memory_id}        # 获取记忆详情
PUT    /api/v1/memory/{memory_id}        # 更新记忆
DELETE /api/v1/memory/{memory_id}        # 删除记忆

# 记忆检索
POST   /api/v1/memory/search             # 搜索记忆
GET    /api/v1/memory/list               # 分页列表
GET    /api/v1/memory/types/{type}       # 按类型获取

# 记忆管理
POST   /api/v1/memory/consolidate        # 记忆整合
POST   /api/v1/memory/forget             # 记忆遗忘
GET    /api/v1/memory/stats              # 统计信息
POST   /api/v1/memory/export             # 导出记忆
POST   /api/v1/memory/import             # 导入记忆
```

#### 3.5.2 RAG知识库API

```
# 文档管理
POST   /api/v1/rag/documents             # 上传文档
GET    /api/v1/rag/documents             # 文档列表
DELETE /api/v1/rag/documents/{doc_id}    # 删除文档

# 知识检索
POST   /api/v1/rag/search                # 基础检索
POST   /api/v1/rag/search/advanced       # 高级检索(MQE/HyDE)

# 问答
POST   /api/v1/rag/ask                   # 问答接口

# 管理
GET    /api/v1/rag/stats                 # 统计信息
POST   /api/v1/rag/reindex               # 重建索引
```

#### 3.5.3 知识图谱API

```
# 实体管理
GET    /api/v1/graph/entities            # 实体列表
GET    /api/v1/graph/entities/{id}       # 实体详情
GET    /api/v1/graph/entities/{id}/relations  # 实体关系

# 图谱查询
POST   /api/v1/graph/search              # 图谱搜索
GET    /api/v1/graph/path                # 路径查询

# 可视化数据
GET    /api/v1/graph/visualization       # 获取可视化数据
GET    /api/v1/graph/stats               # 图谱统计
```

### 3.6 前端页面设计

#### 3.6.1 仪表盘 (Dashboard)

```
┌─────────────────────────────────────────────────────────────────────────┐
│ 智能体记忆管理系统                                      [用户] [设置]   │
├─────────┬───────────────────────────────────────────────────────────────┤
│         │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────┐  │
│ 导航栏   │  │ 总记忆数    │ │ 今日新增    │ │ 知识库文档  │ │ 存储状态│  │
│         │  │   1,234     │ │    56       │ │    89       │ │  正常   │  │
│ [仪表盘] │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────┘  │
│ [记忆]   │                                                              │
│ [RAG]    │  ┌────────────────────────────┐ ┌────────────────────────┐   │
│ [图谱]   │  │    记忆类型分布饼图        │ │   记忆增长趋势折线图   │   │
│ [问答]   │  │                            │ │                        │   │
│ [设置]   │  │                            │ │                        │   │
│         │  └────────────────────────────┘ └────────────────────────┘   │
│         │                                                              │
│         │  ┌────────────────────────────────────────────────────────┐   │
│         │  │                  最近记忆列表                          │   │
│         │  │  [工作] 用户询问了Python函数的问题...    2分钟前       │   │
│         │  │  [情景] 完成了第一个Python项目...        5分钟前       │   │
│         │  │  [语义] Python是一种解释型语言...        10分钟前      │   │
│         │  └────────────────────────────────────────────────────────┘   │
└─────────┴───────────────────────────────────────────────────────────────┘
```

#### 3.6.2 知识图谱可视化

```
┌─────────────────────────────────────────────────────────────────────────┐
│ 知识图谱                                            [搜索] [过滤] [导出]│
├─────────┬───────────────────────────────────────────────────────────────┤
│         │  ┌────────────────────────────────────────────────────────┐   │
│ 实体类型 │  │                                                        │   │
│ [全部]   │  │              ○ Python                                  │   │
│ □ PERSON │  │            /   |   \                                   │   │
│ □ ORG    │  │         ○    ○    ○                                   │   │
│ □ CONCEPT│  │        ML   函数   变量                                │   │
│ □ SKILL  │  │         |         |                                    │   │
│         │  │         ○         ○                                    │   │
│ 关系类型 │  │       神经网络   数据类型                               │   │
│ □ KNOWS  │  │                                                        │   │
│ □ RELATED│  └────────────────────────────────────────────────────────┘   │
│ □ HAS    │                                                              │
│         │  ┌────────────────────────────────────────────────────────┐   │
│ 深度     │  │ 选中实体: Python                                       │   │
│ [1] [2]  │  │ 类型: CONCEPT  |  相关记忆: 15条  |  关联实体: 8个      │   │
│ [3] [4]  │  │ 描述: Python是一种高级编程语言...                      │   │
│         │  └────────────────────────────────────────────────────────┘   │
└─────────┴───────────────────────────────────────────────────────────────┘
```

---

## 4. 项目实现阶段规划

### 阶段0：项目准备（预计1天）

**目标**：完成项目基础设施搭建

| 任务 | 描述 | 产出 |
|------|------|------|
| 项目结构重组 | 按照新目录结构重新组织代码 | 清晰的目录结构 |
| 依赖管理 | 创建requirements.txt和pyproject.toml | 依赖配置文件 |
| 配置管理 | 实现settings.py和环境变量管理 | 配置模块 |
| 日志系统 | 配置Loguru日志 | 日志模块 |

---

### 阶段1：核心层重构（预计2天）

**目标**：将现有记忆系统重构为更清晰的模块结构

| 任务 | 描述 | 产出 |
|------|------|------|
| 嵌入模块重构 | 将embedding.py拆分为独立模块 | core/embedding/ |
| 存储模块重构 | 统一存储接口，添加连接池管理 | core/storage/ |
| 记忆模块重构 | 保留原有逻辑，优化导入结构 | core/memory/ |
| RAG模块重构 | 添加检索器抽象，优化pipeline | core/rag/ |

---

### 阶段2：服务层实现（预计2天）

**目标**：实现业务服务层，封装核心功能

| 任务 | 描述 | 产出 |
|------|------|------|
| MemoryService | 记忆CRUD、搜索、管理功能封装 | memory_service.py |
| RAGService | 文档处理、检索、问答功能封装 | rag_service.py |
| GraphService | 知识图谱查询、可视化数据生成 | graph_service.py |
| AnalyticsService | 统计分析、报告生成 | analytics_service.py |

---

### 阶段3：API层实现（预计2天）

**目标**：实现RESTful API接口

| 任务 | 描述 | 产出 |
|------|------|------|
| FastAPI应用搭建 | 创建主应用、配置中间件 | api/main.py |
| 记忆API | 实现记忆相关的所有接口 | api/routes/memory.py |
| RAG API | 实现RAG相关的所有接口 | api/routes/rag.py |
| 图谱API | 实现知识图谱相关接口 | api/routes/graph.py |
| Schemas定义 | 定义请求/响应数据模型 | api/schemas/ |
| API文档 | 自动生成OpenAPI文档 | /docs |

---

### 阶段4：前端基础实现（预计3天）

**目标**：实现前端页面框架和核心页面

| 任务 | 描述 | 产出 |
|------|------|------|
| 页面框架 | 创建基础模板、导航、布局 | templates/base.html |
| 仪表盘页面 | 系统概览、统计图表 | templates/dashboard.html |
| 记忆浏览器 | 记忆列表、搜索、详情 | templates/memory_browser.html |
| 静态资源 | CSS样式、JS脚本 | web/static/ |

---

### 阶段5：高级功能实现（预计3天）

**目标**：实现知识图谱可视化、RAG管理、问答测试台

| 任务 | 描述 | 产出 |
|------|------|------|
| 知识图谱可视化 | 基于ECharts的交互式图谱 | templates/knowledge_graph.html |
| RAG管理页面 | 文档上传、分块预览 | templates/rag_manager.html |
| 问答测试台 | 实时问答、结果展示 | templates/qa_console.html |
| 设置页面 | 配置管理、参数调整 | templates/settings.html |

---

### 阶段6：测试与优化（预计2天）

**目标**：完善测试、优化性能、修复问题

| 任务 | 描述 | 产出 |
|------|------|------|
| 单元测试 | 核心功能测试 | tests/ |
| 集成测试 | API接口测试 | tests/test_api/ |
| 性能优化 | 查询优化、缓存添加 | 优化代码 |
| 文档完善 | README、API文档 | 文档更新 |

---

### 阶段7：部署与文档（预计1天）

**目标**：完成部署配置和最终文档

| 任务 | 描述 | 产出 |
|------|------|------|
| Docker配置 | Dockerfile、docker-compose | 容器配置 |
| 部署文档 | 安装、配置、运行指南 | DEPLOYMENT.md |
| 用户手册 | 功能使用说明 | USER_GUIDE.md |

---

## 5. 风险与注意事项

### 5.1 技术风险

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 数据库连接不稳定 | 服务中断 | 实现重试机制和连接池 |
| 嵌入API限流 | 批量处理失败 | 实现请求限流和队列 |
| 前端性能问题 | 用户体验差 | 分页加载、虚拟滚动 |

### 5.2 兼容性考虑

- 保持原有核心代码逻辑不变，仅进行结构重组
- 确保现有的记忆系统和RAG功能正常运行
- 新增的API层不影响原有的Python调用方式

### 5.3 扩展性预留

- 服务层采用依赖注入，便于后续替换实现
- API设计遵循RESTful规范，便于后续扩展
- 前端采用组件化设计，便于功能迭代

---

## 6. 附录

### 6.1 环境变量配置示例

```bash
# 应用配置
APP_NAME=AgentMemorySystem
APP_ENV=development
DEBUG=true
SECRET_KEY=your-secret-key

# 数据库配置
QDRANT_URL=https://your-cluster.qdrant.tech:6333
QDRANT_API_KEY=your_qdrant_api_key
QDRANT_COLLECTION=hello_agents_vectors

NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_neo4j_password

# 嵌入模型配置
EMBED_MODEL_TYPE=dashscope
EMBED_MODEL_NAME=text-embedding-v3
EMBED_API_KEY=your_embed_api_key

# LLM配置（问答生成）
LLM_MODEL_TYPE=dashscope
LLM_MODEL_NAME=qwen-plus
LLM_API_KEY=your_llm_api_key

# Redis配置（可选）
REDIS_URL=redis://localhost:6379/0
```

### 6.2 技术依赖清单

```txt
# Web框架
fastapi>=0.104.0
uvicorn>=0.24.0
python-multipart>=0.0.6
jinja2>=3.1.2

# 数据验证
pydantic>=2.5.0

# 数据库
qdrant-client>=1.6.0
neo4j>=5.0.0

# 嵌入模型
sentence-transformers>=2.2.0
dashscope>=1.14.0

# 文档处理
markitdown>=0.0.1
pypdf>=3.17.0

# NLP
spacy>=3.7.0
langdetect>=1.0.9

# 工具库
numpy>=1.24.0
scikit-learn>=1.3.0
loguru>=0.7.0

# 前端相关
tailwindcss>=3.0.0 (npm)
echarts>=5.4.0 (cdn)
alpinejs>=3.0.0 (cdn)
```

---

*文档版本：1.0*
*创建日期：2024年12月*
*最后更新：2024年12月*

